---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer';
import { Sun, Cloud, CloudRain, Wind, Thermometer, Droplets, Navigation, Camera, Info, MapPin, Calendar, Sunrise, Clock, Users, Compass, Star } from 'lucide-react';

// Mock weather data for Riomaggiore in December
const currentWeather = {
    temp: 12,
    condition: "Partly Cloudy",
    icon: "cloud",
    high: 14,
    low: 8,
    wind: "12 km/h",
    humidity: "65%",
    seaTemp: "16°C",
    uvIndex: "Low (2)",
    visibility: "15 km",
    sunrise: "07:45",
    sunset: "16:50"
};

const forecast = [
    { day: "Fri", date: "Dec 19", high: 13, low: 7, condition: "Sunny", icon: "sun" },
    { day: "Sat", date: "Dec 20", high: 11, low: 9, condition: "Rainy", icon: "rain" },
    { day: "Sun", date: "Dec 21", high: 10, low: 6, condition: "Cloudy", icon: "cloud" },
    { day: "Mon", date: "Dec 22", high: 12, low: 8, condition: "Sunny", icon: "sun" },
    { day: "Tue", date: "Dec 23", high: 14, low: 10, condition: "Partly Cloudy", icon: "cloud" }
];

const webcams = [
    {
        id: 1,
        name: "Harbor View",
        description: "Live view of the iconic Riomaggiore harbor and boat ramp.",
        image: "https://images.unsplash.com/photo-1534447677768-be436bb09401?auto=format&fit=crop&q=80&w=1000",
        status: "Live"
    },
    {
        id: 2,
        name: "Main Street (Via Colombo)",
        description: "Looking up the bustling main street from the lower village.",
        image: "https://images.unsplash.com/photo-1499678329028-101435549a4e?auto=format&fit=crop&q=80&w=1000",
        status: "Live"
    }
];

const giuliaAdvice = {
    condition: "Partly Cloudy",
    note: "December in Riomaggiore has a specific kind of light—crisp and clear. It's not beach weather, but it's the best time for the high trails. The air is fresh, and you won't break a sweat climbing to Montenero. Just remember: the sun drops behind the cliffs early, so the village gets chilly by 4 PM. Carry a light wool scarf—it's the local way.",
    recommendations: [
        "Perfect for the hike to Santuario di Montenero.",
        "Ideal light for photography in the harbor around 3 PM.",
        "Grab a hot 'Sciacchetrà' tasting at a local enoteca as the sun sets."
    ]
};
---

<Layout title="Weather & Conditions | Riomaggiore | Cinque Terre Dispatch">
    <!-- Hero Section (EXACT MATCH to Sights Page) -->
    <section class="relative h-[60vh] min-h-[500px] flex items-center overflow-hidden">
        <div class="absolute inset-0">
            <img 
                src="https://images.unsplash.com/photo-1534447677768-be436bb09401?auto=format&fit=crop&q=80&w=2000" 
                alt="Riomaggiore Atmosphere" 
                class="w-full h-full object-cover"
            />
            <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-black/60"></div>
        </div>
        
        <div class="container mx-auto px-4 relative z-10">
            <div class="max-w-4xl">
                <div class="inline-block px-3 py-1 rounded-full bg-white/20 backdrop-blur-sm text-white text-xs font-bold uppercase tracking-widest mb-4">
                    Live Conditions
                </div>
                <h1 class="font-serif text-5xl md:text-7xl font-bold text-white mb-6 leading-tight">
                    Atmosphere &<br/>Coastal Rhythms
                </h1>
                <p class="text-white/90 text-xl md:text-2xl font-light leading-relaxed max-w-2xl mb-12">
                    The current state of the sea, the sky, and the village—curated for those who plan with intention.
                </p>

                <!-- Weather Summary Row (User Request) -->
                <div class="flex flex-wrap gap-8 md:gap-16">
                    <!-- Now -->
                    <div class="space-y-2">
                        <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-white/60">Now</p>
                        <div class="flex items-center gap-4">
                            <div class="text-4xl md:text-5xl font-serif font-bold text-white">{currentWeather.temp}°</div>
                            <div class="text-white/80">
                                {currentWeather.icon === "cloud" && <Cloud className="w-6 h-6" />}
                                {currentWeather.icon === "sun" && <Sun className="w-6 h-6" />}
                                {currentWeather.icon === "rain" && <CloudRain className="w-6 h-6" />}
                                <p class="text-xs font-serif italic mt-1">{currentWeather.condition}</p>
                            </div>
                        </div>
                    </div>

                    {forecast.slice(0, 2).map((day) => (
                        <div class="space-y-2">
                            <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-white/60">{day.day}</p>
                            <div class="flex items-center gap-4">
                                <div class="text-4xl md:text-5xl font-serif font-bold text-white">{day.high}°</div>
                                <div class="text-white/80">
                                    {day.icon === "sun" && <Sun className="w-6 h-6" />}
                                    {day.icon === "cloud" && <Cloud className="w-6 h-6" />}
                                    {day.icon === "rain" && <CloudRain className="w-6 h-6" />}
                                    <p class="text-xs font-serif italic mt-1">{day.condition}</p>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    </section>

    <!-- Introduction (EXACT MATCH to Sights Page) -->
    <section class="py-24 bg-white border-y border-border/40 overflow-hidden relative">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full opacity-[0.02] pointer-events-none">
            <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0 100 C 20 0, 50 0, 100 100" stroke="currentColor" fill="transparent" />
            </svg>
        </div>
        <div class="container mx-auto px-4 relative">
            <div class="max-w-4xl mx-auto text-center space-y-10">
                <div class="inline-flex items-center gap-4">
                    <div class="h-px w-8 bg-primary/30"></div>
                    <span class="text-[10px] font-bold uppercase tracking-[0.4em] text-primary">Live Report</span>
                    <div class="h-px w-8 bg-primary/30"></div>
                </div>
                
                <p class="font-serif text-2xl md:text-4xl text-foreground leading-[1.4] italic font-light">
                    Riomaggiore's weather is more than just a forecast; it's the heartbeat of the village. Today, the atmosphere is defined by <span class="font-bold not-italic text-primary">{currentWeather.condition}</span> skies and a crisp <span class="font-bold not-italic text-primary">{currentWeather.temp}°C</span>.
                </p>
                
                <div class="space-y-4">
                    <p class="text-muted-foreground text-lg font-serif">
                        They are presented as they deserve to be: with care, context, and a human voice.
                    </p>
                    <div class="flex justify-center pt-4">
                        <div class="w-12 h-px bg-border"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content (EXACT MATCH to Sights Grid Structure) -->
    <section class="py-16 container mx-auto px-4">
        <div class="space-y-16">
            <article class="group">
                <!-- Image (EXACT MATCH to Sights Article Image) -->
                <div class="relative aspect-[21/9] overflow-hidden rounded-xl mb-8">
                    <img 
                        src="https://images.unsplash.com/photo-1499678329028-101435549a4e?auto=format&fit=crop&q=80&w=2000" 
                        alt="Riomaggiore Coastal View"
                        class="object-cover w-full h-full transition-transform duration-500 group-hover:scale-105"
                    />
                    <span class="absolute top-6 left-6 bg-white/90 text-black px-3 py-1.5 rounded-full text-xs font-semibold uppercase tracking-wide shadow-sm">
                        Atmosphere
                    </span>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                    
                    <!-- Main Content (2/3) -->
                    <div class="lg:col-span-2 space-y-8">
                        <!-- Header -->
                        <div>
                            <div class="flex items-center gap-2 mb-3">
                                <Camera className="w-4 h-4 text-primary" />
                                <span class="text-sm font-medium text-muted-foreground">Local Perspective</span>
                            </div>
                            <h2 class="font-serif text-4xl md:text-5xl font-bold mb-4 leading-tight">
                                Giulia's Weather Journal
                            </h2>
                        </div>

                        <!-- Signature Quote -->
                        <div class="pl-6 border-l-2 border-primary/30">
                            <p class="font-serif text-xl italic text-foreground/70 leading-relaxed">
                                "Watch the horizon—it always tells the truth first."
                            </p>
                        </div>

                        <!-- Editor's Note (EXACT MATCH to Sights Editor's Note) -->
                        <div class="relative py-8 group/note">
                            <div class="absolute top-0 right-0 p-4 opacity-[0.05] group-hover/note:opacity-[0.1] transition-opacity">
                                <svg class="w-24 h-24 text-primary fill-current" viewBox="0 0 24 24">
                                    <path d="M14.017 21L14.017 18C14.017 16.8954 14.9124 16 16.017 16H19.017C19.5693 16 20.017 15.5523 20.017 15V9C20.017 8.44772 19.5693 8 19.017 8H16.017C15.4647 8 15.017 8.44772 15.017 9V12C15.017 12.5523 14.5693 13 14.017 13H13.017C12.4647 13 12.017 12.5523 12.017 12V9C12.017 6.79086 13.8079 5 16.017 5H19.017C21.2261 5 23.017 6.79086 23.017 9V15C23.017 18.866 19.883 22 16.017 22H14.017V21ZM2.01698 21L2.01698 18C2.01698 16.8954 2.91241 16 4.01698 16H7.01698C7.56927 16 8.01698 15.5523 8.01698 15V9C8.01698 8.44772 7.56927 8 7.01698 8H4.01698C3.4647 8 3.01698 8.44772 3.01698 9V12C3.01698 12.5523 2.56927 13 2.01698 13H1.01698C0.4647 13 0.0169824 12.5523 0.0169824 12V9C0.0169824 6.79086 1.80784 5 4.01698 5H7.01698C9.22612 5 11.017 6.79086 11.017 9V15C11.017 18.866 7.88298 22 4.01698 22H2.01698V21Z" />
                                </svg>
                            </div>
                            <div class="relative flex flex-col md:flex-row items-start gap-6">
                                <div class="relative flex-shrink-0">
                                    <div class="w-16 h-16 rounded-full bg-primary/10 p-1 ring-2 ring-primary/20">
                                        <div class="w-full h-full rounded-full overflow-hidden bg-secondary">
                                            <img 
                                                src="https://api.dicebear.com/7.x/avataaars/svg?seed=Giulia" 
                                                alt="Giulia Rossi"
                                                class="w-full h-full object-cover"
                                            />
                                        </div>
                                    </div>
                                    <div class="absolute -bottom-1 -right-1 bg-primary text-white p-1 rounded-full shadow-lg">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </div>
                                </div>
                                <div class="flex-1 space-y-4">
                                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-[10px] font-bold uppercase tracking-[0.2em]">
                                        Local Perspective
                                    </div>
                                    <blockquote class="font-serif text-xl text-foreground/90 leading-relaxed italic">
                                        "{giuliaAdvice.note}"
                                    </blockquote>
                                    <div class="flex items-center gap-3 pt-2">
                                        <div class="h-px w-8 bg-primary/30"></div>
                                        <p class="text-sm font-medium text-foreground">
                                            Giulia Rossi <span class="text-muted-foreground font-normal ml-1">— Riomaggiore Expert</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Daily Picks (Matching Sights Orientation Style) -->
                        <div class="space-y-6 pt-8">
                            <p class="text-[10px] font-bold uppercase tracking-[0.4em] text-primary">Giulia's Daily Picks</p>
                            <ul class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {giuliaAdvice.recommendations.map((rec) => (
                                    <li class="flex items-start gap-4 text-lg text-foreground/80 leading-relaxed italic font-serif group">
                                        <div class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 group-hover:bg-primary/10 transition-colors">
                                            <Compass className="w-5 h-5 text-primary" />
                                        </div>
                                        <span class="pt-1">{rec}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>

                        <!-- The Week Ahead (Forecast) -->
                        <div class="space-y-12 pt-16 border-t border-border/40">
                            <div class="flex items-center justify-between">
                                <h2 class="font-serif text-3xl font-bold text-foreground">The Week Ahead</h2>
                                <div class="h-px flex-1 bg-border/40 ml-8"></div>
                            </div>
                            
                            <div class="divide-y divide-border/40">
                                {forecast.map((day, index) => (
                                    <div class="group flex items-center justify-between py-8 first:pt-0 last:pb-0">
                                        <div class="flex items-center gap-8">
                                            <span class="font-serif text-4xl text-primary/10 group-hover:text-primary/30 transition-colors leading-none select-none w-10">
                                                {index + 1}
                                            </span>
                                            <div>
                                                <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-primary mb-1">{day.day}</p>
                                                <p class="text-xl font-serif font-bold text-foreground">{day.date}</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-12">
                                            <div class="flex items-center gap-4">
                                                <div class="w-12 h-12 rounded-full bg-secondary flex items-center justify-center">
                                                    {day.icon === "sun" && <Sun className="w-6 h-6 text-amber-500" />}
                                                    {day.icon === "cloud" && <Cloud className="w-6 h-6 text-blue-400" />}
                                                    {day.icon === "rain" && <CloudRain className="w-6 h-6 text-blue-600" />}
                                                </div>
                                                <span class="text-base text-muted-foreground font-serif italic hidden md:inline">{day.condition}</span>
                                            </div>
                                            <div class="text-right min-w-[80px]">
                                                <span class="text-3xl font-serif font-bold text-foreground">{day.high}°</span>
                                                <span class="text-base text-muted-foreground ml-3">{day.low}°</span>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar Column (1/3) (EXACT MATCH to Sights Sidebar) -->
                    <div class="lg:col-span-1">
                        <div class="sticky top-24 space-y-10">
                            <!-- Header -->
                            <div>
                                <h3 class="font-serif text-2xl font-bold text-foreground mb-6 pb-4 border-b border-border">
                                    Essential Information
                                </h3>
                                
                                <!-- Webcams (Matching Map Integration Style) -->
                                <div class="space-y-8">
                                    {webcams.map((cam) => (
                                        <div class="group/cam">
                                            <div class="relative aspect-video rounded-xl overflow-hidden border border-border/50 mb-4">
                                                <img 
                                                    src={cam.image} 
                                                    alt={cam.name}
                                                    class="object-cover w-full h-full transition-transform duration-700 group-hover/cam:scale-110"
                                                />
                                                <div class="absolute top-4 left-4 flex items-center gap-2 px-2 py-1 rounded-full bg-red-600/90 backdrop-blur-sm text-[8px] font-bold text-white uppercase tracking-[0.2em]">
                                                    <span class="relative flex h-1.5 w-1.5">
                                                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span>
                                                        <span class="relative inline-flex rounded-full h-1.5 w-1.5 bg-white"></span>
                                                    </span>
                                                    {cam.status}
                                                </div>
                                            </div>
                                            <h4 class="font-serif text-lg font-bold text-foreground mb-1 group-hover:text-primary transition-colors">{cam.name}</h4>
                                            <p class="text-xs text-muted-foreground leading-relaxed italic font-serif">{cam.description}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <!-- Practical Details (EXACT MATCH to Sights Info Items) -->
                            <div class="space-y-8">
                                <div class="flex items-center justify-between">
                                    <h4 class="text-[10px] font-bold uppercase tracking-[0.2em] text-primary">Practical Details</h4>
                                    <div class="h-px flex-1 bg-primary/10 ml-4"></div>
                                </div>

                                <div class="space-y-6">
                                    <!-- Humidity -->
                                    <div class="flex gap-4 group/info">
                                        <div class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 group-hover/info:bg-primary/10 transition-colors">
                                            <Droplets className="w-5 h-5 text-primary" />
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <div class="text-[10px] font-bold uppercase tracking-widest text-muted-foreground mb-1">Humidity</div>
                                            <div class="text-sm font-medium text-foreground leading-relaxed">{currentWeather.humidity}</div>
                                        </div>
                                    </div>
                                    
                                    <!-- UV Index -->
                                    <div class="flex gap-4 group/info">
                                        <div class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 group-hover/info:bg-primary/10 transition-colors">
                                            <Sun className="w-5 h-5 text-primary" />
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <div class="text-[10px] font-bold uppercase tracking-widest text-muted-foreground mb-1">UV Index</div>
                                            <div class="text-sm font-medium text-foreground leading-relaxed">{currentWeather.uvIndex}</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Visibility -->
                                    <div class="flex gap-4 group/info">
                                        <div class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 group-hover/info:bg-primary/10 transition-colors">
                                            <Info className="w-5 h-5 text-primary" />
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <div class="text-[10px] font-bold uppercase tracking-widest text-muted-foreground mb-1">Visibility</div>
                                            <div class="text-sm font-medium text-foreground leading-relaxed">{currentWeather.visibility}</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Wind -->
                                    <div class="flex gap-4 group/info">
                                        <div class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 group-hover/info:bg-primary/10 transition-colors">
                                            <Navigation className="w-5 h-5 text-primary" />
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <div class="text-[10px] font-bold uppercase tracking-widest text-muted-foreground mb-1">Wind Speed</div>
                                            <div class="text-sm font-medium text-foreground leading-relaxed">{currentWeather.wind}</div>
                                        </div>
                                    </div>

                                    <!-- Sea Temp -->
                                    <div class="flex gap-4 group/info">
                                        <div class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 group-hover/info:bg-primary/10 transition-colors">
                                            <Thermometer className="w-5 h-5 text-primary" />
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <div class="text-[10px] font-bold uppercase tracking-widest text-muted-foreground mb-1">Sea Temperature</div>
                                            <div class="text-sm font-medium text-foreground leading-relaxed">{currentWeather.seaTemp}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>

    <!-- Closing Note (EXACT MATCH to Sights Page) -->
    <section class="py-20 bg-secondary/30">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto text-center space-y-6">
                <h3 class="font-serif text-3xl md:text-4xl font-bold text-foreground">
                    Watch the Horizon
                </h3>
                <p class="text-lg text-muted-foreground leading-relaxed font-light">
                    Coastal weather is a living thing. It changes with the tide, the wind, and the season. Plan your day, but be ready to let the village surprise you. The best experiences in Riomaggiore are often the ones you didn't plan.
                </p>
                <p class="text-base text-muted-foreground italic">
                    — The Dispatch Weather Desk
                </p>
            </div>
        </div>
    </section>

    <Footer />
</Layout>

<style>
    .font-serif {
        letter-spacing: -0.02em;
    }
</style>
