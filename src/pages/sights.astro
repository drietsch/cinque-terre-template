---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer';
import EditorialHero from '../components/EditorialHero.astro';
import EditorialIntro from '../components/EditorialIntro.astro';
import EditorNote from '../components/EditorNote.astro';
import PracticalInfoItem from '../components/PracticalInfoItem.astro';
import ReviewSummary from '../components/ReviewSummary.astro';
import SectionHeader from '../components/SectionHeader.astro';
import ClosingNote from '../components/ClosingNote.astro';
import { Star, MapPin, Clock, Users, Sunrise, Info, Compass, Waves, Heart } from 'lucide-react';

const sights = [
    // ... (keep the sights array as is)
];
---

<Layout title="Sights of Riomaggiore | Cinque Terre Dispatch">
    <EditorialHero 
        title="Sights Worth<br/>Your Attention"
        subtitle="Not a catalog, but a quiet invitation to the places that define Riomaggiore—and why they matter."
        badge="Editorial Guide"
        image="/scenic_viewpoint_1765960559207.png"
    />

    <EditorialIntro 
        badge="Curated Selection"
        quote="Each sight here has been chosen not for completeness, but for character. These are the places that reveal something essential about Riomaggiore—its rhythm, its light, its relationship with the sea."
    >
        <div class="space-y-6">
            <p>
                They are presented as they deserve to be: with care, context, and a human voice.
            </p>
        </div>
        <div class="space-y-6">
            <p>
                We invite you to look beyond the surface, to notice the small details that make these places more than just photo opportunities.
            </p>
        </div>
    </EditorialIntro>

    <!-- Sights Grid -->
    <section class="py-16 container mx-auto px-4">
        <div class="space-y-32">
            {sights.map((sight, index) => (
                <article class="group cursor-pointer">
                    <!-- Image -->
                    <div class="relative aspect-[21/9] overflow-hidden rounded-xl mb-8">
                        <img 
                            src={sight.image} 
                            alt={sight.name}
                            class="object-cover w-full h-full transition-transform duration-500 group-hover:scale-105"
                        />
                        <span class="absolute top-6 left-6 bg-white/90 text-black px-3 py-1.5 rounded-full text-xs font-semibold uppercase tracking-wide shadow-sm">
                            {sight.category}
                        </span>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                        
                        {/* Main Content (2/3) */}
                        <div class="lg:col-span-2 space-y-8">
                            <!-- Header -->
                            <div>
                                <div class="flex items-center gap-2 mb-3">
                                    <MapPin className="w-4 h-4 text-primary" />
                                    <span class="text-sm font-medium text-muted-foreground">{sight.village}</span>
                                </div>
                                <h2 class="font-serif text-4xl md:text-5xl font-bold mb-4 group-hover:text-primary transition-colors leading-tight">
                                    {sight.name}
                                </h2>
                            </div>

                            {/* Signature Quote (Intro) */}
                            <div class="pl-6 border-l-2 border-primary/30">
                                <p class="font-serif text-xl italic text-foreground/70 leading-relaxed">
                                    "{sight.signature}"
                                </p>
                            </div>

                            {/* Description */}
                            <div class="prose prose-lg max-w-none">
                                <p class="text-foreground/80 text-lg leading-relaxed mb-4">
                                    {sight.description}
                                </p>
                                <p class="text-muted-foreground leading-relaxed flex items-center gap-2">
                                    <Compass className="w-4 h-4 text-primary/60" />
                                    {sight.orientation}
                                </p>
                            </div>

                            <EditorNote quote={sight.editorComment} />
                        </div>

                        {/* Facts Sidebar (1/3) */}
                        <div class="lg:col-span-1">
                            <div class="sticky top-24 space-y-10">
                                <!-- Header -->
                                <div>
                                    <h3 class="font-serif text-2xl font-bold text-foreground mb-6 pb-4 border-b border-border">
                                        Essential Information
                                    </h3>
                                    
                                    <!-- Map Integration -->
                                    <div class="relative aspect-video rounded-xl overflow-hidden border border-border/50 mb-8 group/map">
                                        <img 
                                            src="https://api.mapbox.com/styles/v1/mapbox/light-v11/static/pin-l+bf2b2b(9.7376,44.099)/9.7386,44.0994,15.39,0/640x360@2x?before_layer=admin-1-boundary&access_token=pk.eyJ1IjoiZHJpZXRzY2giLCJhIjoiY21qYjAzMWxtMGJpZDNlc2RqMWN3NHdjbSJ9.k9Xvn4saiEtYhrJE8bKk7Q" 
                                            alt="Location Map"
                                            class="object-cover w-full h-full transition-transform duration-700 group-hover/map:scale-110"
                                        />
                                        <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover/map:opacity-100 transition-opacity"></div>
                                    </div>
                                </div>
                                
                                <ReviewSummary 
                                    googleRating={sight.googleRating} 
                                    tripadvisorRating={sight.tripadvisorRating} 
                                    label="Traveler Reviews"
                                />

                                <!-- Info Items -->
                                <div class="space-y-8">
                                    <SectionHeader label="Practical Details" />

                                    <div class="space-y-6">
                                        <PracticalInfoItem label="Best Time" value={sight.bestTime}>
                                            <Sunrise slot="icon" className="w-5 h-5 text-primary" />
                                        </PracticalInfoItem>

                                        <PracticalInfoItem label="Duration" value={sight.duration}>
                                            <Clock slot="icon" className="w-5 h-5 text-primary" />
                                        </PracticalInfoItem>

                                        <PracticalInfoItem label="Crowd Level" value={sight.crowdLevel}>
                                            <Users slot="icon" className="w-5 h-5 text-primary" />
                                        </PracticalInfoItem>
                                        
                                        <PracticalInfoItem label="Access" value={sight.access}>
                                            <Info slot="icon" className="w-5 h-5 text-primary" />
                                        </PracticalInfoItem>

                                        {sight.seasonalNote && (
                                            <PracticalInfoItem label="Seasonal Note" value={sight.seasonalNote}>
                                                <Sunrise slot="icon" className="w-5 h-5 text-primary" />
                                            </PracticalInfoItem>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>
            ))}
        </div>
    </section>

    <ClosingNote title="A Note on Exploration">
        <p>
            These sights are not meant to be checked off a list. They are invitations to slow down, to notice, to feel. Visit them in the order that makes sense for your day, or skip the ones that don't speak to you. The best experiences in Riomaggiore are often the ones you didn't plan.
        </p>
        <p class="italic">
            — The Editors
        </p>
    </ClosingNote>

    <Footer />
</Layout>

<style>
    html {
        scroll-behavior: smooth;
    }

    .font-serif {
        letter-spacing: -0.02em;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    article {
        animation: fadeInUp 0.8s ease-out;
        animation-fill-mode: both;
    }
</style>
