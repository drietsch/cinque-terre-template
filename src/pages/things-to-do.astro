---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer';
import EditorialHero from '../components/EditorialHero.astro';
import EditorialIntro from '../components/EditorialIntro.astro';
import EditorNote from '../components/EditorNote.astro';
import PracticalInfoItem from '../components/PracticalInfoItem.astro';
import ReviewSummary from '../components/ReviewSummary.astro';
import SectionHeader from '../components/SectionHeader.astro';
import EditorialInterlude from '../components/EditorialInterlude.astro';
import ClosingNote from '../components/ClosingNote.astro';
import { Star, MapPin, Clock, Footprints, Waves, Mountain, Utensils, Eye, Users, Info, Compass, Sun, Heart, CameraOff } from 'lucide-react';

const experiences = [
    // ... (keep the experiences array as is)
];
---

<Layout title="The Art of Presence: Things to Do in Riomaggiore | Cinque Terre Dispatch">
    <EditorialHero 
        title="The Art of<br/>Presence"
        subtitle="In Riomaggiore, 'doing' is a matter of noticing. It is the shift from searching for highlights to paying attention to the rhythm of the stone and the sea."
        badge="Modes of Engagement"
        image="https://images.unsplash.com/photo-1490623970972-ae8bb3da443e?q=80&w=2669&auto=format&fit=crop"
    />

    <EditorialIntro 
        badge="Beyond the Checklist"
        quote="Riomaggiore offers very few formal attractions, and that is precisely its strength. There are no museums to rush through, no monuments to check off a list."
    >
        <div class="space-y-6">
            <p>
                We invite you to <strong>challenge the idea of productivity</strong> in your travel. The most meaningful experiences in this village unfold slowly and often without signs. They are found in the gaps between the 'must-sees'—in the way the light enters a narrow alley, or the way the sound of the sea changes as you climb higher.
            </p>
            <p>
                To 'do' something here is to <strong>engage with the village's spirit</strong>. It is a choice of how you spend your attention. Whether you are wandering without a route, sitting on a salt-worn rock, or sharing a simple meal, you are participating in a way of life that has remained remarkably consistent despite the world's acceleration.
            </p>
        </div>
        <div class="space-y-6">
            <p>
                This page is not a schedule to be filled, but a <strong>guide to different kinds of presence</strong>. It acknowledges that your energy, the season, and the light will dictate what feels right at any given moment. There is no 'correct' way to see Riomaggiore, only a more or less attentive one.
            </p>
            <p>
                Slow down. <strong>Trust your senses</strong>. Allow the village to unfold at its own pace. You will find that when you stop searching for highlights, the entire place becomes one.
            </p>
        </div>
    </EditorialIntro>

    <!-- Transition Section -->
    <section class="py-20 bg-secondary/20 border-y border-border/40">
        <div class="container mx-auto px-4 text-center">
            <h2 class="font-serif text-4xl md:text-5xl font-bold text-foreground mb-6">
                Ways of Engaging
            </h2>
            <p class="text-xl text-muted-foreground max-w-2xl mx-auto font-light leading-relaxed">
                The following portraits are not activities to complete, but modes of being within the village. Choose the one that matches your mood and the light of the hour.
            </p>
        </div>
    </section>

    <!-- Experiences Collection -->
    <section class="py-24 container mx-auto px-4">
        <div class="space-y-32">
            {experiences.map((exp, index) => (
                <div class="space-y-16">
                    {/* Editorial Interludes */}
                    {index === 2 && (
                        <EditorialInterlude 
                            badge="Editorial Interlude"
                            title="The Value of Getting Lost"
                            quote="In a village built on a cliff, 'lost' is a relative term. You will always eventually find the main street or the sea. The time you spend in between—in the quiet carruggi where no one else is walking—is where you truly meet Riomaggiore. Don't fight the stairs; let them lead you to a view you weren't looking for."
                        >
                            <Compass slot="icon" className="w-full h-full" />
                        </EditorialInterlude>
                    )}

                    {index === 4 && (
                        <EditorialInterlude 
                            badge="Editorial Interlude"
                            title="The Unrecorded Moment"
                            quote="We are often so busy recording our travels that we forget to experience them. Try leaving your phone in your pocket for an hour. Sit at the harbor and just watch the water. The memory of how the salt felt on your skin and how the light looked on the houses is far more powerful than any photograph. Some things are meant to be felt, not captured."
                            align="right"
                            type="secondary"
                        >
                            <CameraOff slot="icon" className="w-full h-full" />
                        </EditorialInterlude>
                    )}

                    <article class="group cursor-pointer">
                        <!-- Image -->
                        <div class="relative aspect-[21/9] overflow-hidden rounded-xl mb-8">
                            <img 
                                src={exp.image} 
                                alt={exp.name}
                                class="object-cover w-full h-full transition-transform duration-500 group-hover:scale-105"
                            />
                            <span class="absolute top-6 left-6 bg-white/90 text-black px-3 py-1.5 rounded-full text-xs font-semibold uppercase tracking-wide shadow-sm">
                                {exp.category}
                            </span>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                            
                            {/* Main Content (2/3) */}
                            <div class="lg:col-span-2 space-y-8">
                                <!-- Header -->
                                <div>
                                    <div class="flex items-center gap-2 mb-3">
                                        <Compass className="w-4 h-4 text-primary" />
                                        <span class="text-sm font-medium text-muted-foreground">{exp.village}</span>
                                    </div>
                                    <h2 class="font-serif text-4xl md:text-5xl font-bold mb-4 group-hover:text-primary transition-colors leading-tight">
                                        {exp.name}
                                    </h2>
                                </div>

                                {/* Signature Quote (Intro) */}
                                <div class="pl-6 border-l-2 border-primary/30">
                                    <p class="font-serif text-xl italic text-foreground/70 leading-relaxed">
                                        "{exp.intro}"
                                    </p>
                                </div>

                                {/* Description */}
                                <div class="prose prose-lg max-w-none">
                                    <p class="text-foreground/80 text-lg leading-relaxed mb-4">
                                        {exp.description}
                                    </p>
                                    <p class="text-muted-foreground leading-relaxed flex items-center gap-2">
                                        <Heart className="w-4 h-4 text-primary/60" />
                                        {exp.signature}
                                    </p>
                                </div>

                                <EditorNote quote={exp.giuliaComment} />
                            </div>

                            {/* Facts Sidebar (1/3) */}
                            <div class="lg:col-span-1">
                                <div class="sticky top-24 space-y-10">
                                    <!-- Header -->
                                    <div>
                                        <h3 class="font-serif text-2xl font-bold text-foreground mb-6 pb-4 border-b border-border">
                                            Engagement Details
                                        </h3>
                                        
                                        <!-- Map Integration -->
                                        <div class="relative aspect-video rounded-xl overflow-hidden border border-border/50 mb-8 group/map">
                                            <img 
                                                src="https://api.mapbox.com/styles/v1/mapbox/light-v11/static/pin-l+bf2b2b(9.7376,44.099)/9.7386,44.0994,15.39,0/640x360@2x?before_layer=admin-1-boundary&access_token=pk.eyJ1IjoiZHJpZXRzY2giLCJhIjoiY21qYjAzMWxtMGJpZDNlc2RqMWN3NHdjbSJ9.k9Xvn4saiEtYhrJE8bKk7Q" 
                                                alt="Location Map"
                                                class="object-cover w-full h-full transition-transform duration-700 group-hover/map:scale-110"
                                            />
                                            <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover/map:opacity-100 transition-opacity"></div>
                                        </div>
                                    </div>
                                    
                                    <ReviewSummary 
                                        googleRating={exp.googleRating} 
                                        tripadvisorRating={exp.tripadvisorRating} 
                                        label="Experience Stats"
                                    />

                                    <!-- Info Items -->
                                    <div class="space-y-8">
                                        <SectionHeader label="Practical Details" />

                                        <div class="space-y-6">
                                            <PracticalInfoItem label="Engagement Mode" value={exp.mode}>
                                                <Footprints slot="icon" className="w-5 h-5 text-primary" />
                                            </PracticalInfoItem>

                                            <PracticalInfoItem label="Physical Effort" value={exp.intensity}>
                                                <Mountain slot="icon" className="w-5 h-5 text-primary" />
                                            </PracticalInfoItem>
                                            
                                            <PracticalInfoItem label="Notes" value={exp.practicalInfo}>
                                                <Info slot="icon" className="w-5 h-5 text-primary" />
                                            </PracticalInfoItem>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
            ))}
        </div>
    </section>

    <ClosingNote title="The Memory of Presence" badge="Doing as Being">
        <div class="space-y-6 text-xl text-inherit font-light leading-relaxed">
            <p>
                In the end, the most meaningful moments in Riomaggiore are often the ones that were unplanned and unrecorded. 
            </p>
            <p>
                It is the way the salt felt on your skin after a swim, the sound of a neighbor's shutters opening in the morning, or the silence of the high paths at dusk. These are the moments that stay with you, long after the photos have been forgotten.
            </p>
            <p>
                Give yourself permission to slow down. Trust your senses. The village is not a task to be completed, but a rhythm to be joined.
            </p>
        </div>

        <div slot="actions" class="pt-12 flex flex-wrap justify-center gap-6">
            <a href="/itinerary" class="px-8 py-4 rounded-full bg-primary text-white font-bold text-sm uppercase tracking-widest hover:bg-primary/90 transition-colors">
                Plan Your Journey
            </a>
            <a href="/village" class="px-8 py-4 rounded-full bg-white/10 backdrop-blur-sm text-white font-bold text-sm uppercase tracking-widest hover:bg-white/20 transition-colors">
                Explore the Village
            </a>
        </div>

        <Waves slot="background" className="w-full h-full scale-150" />
    </ClosingNote>

    <Footer />
</Layout>

<style>
    html {
        scroll-behavior: smooth;
    }

    .font-serif {
        letter-spacing: -0.02em;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    article {
        animation: fadeInUp 0.8s ease-out;
        animation-fill-mode: both;
    }
</style>
